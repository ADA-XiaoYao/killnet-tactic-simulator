# 定义一个 server 块，用于处理进入的HTTP请求
server {
    # 监听容器内部的 80 端口
    listen 80;

    # 定义服务器名称，这里使用 localhost 即可
    server_name localhost;

    # --- 日志配置 ---
    # 定义访问日志的路径和格式。
    # 我们使用 Nginx 默认的 'main' 格式，它记录了足够的信息。
    access_log /var/log/nginx/access.log main;
    # 定义错误日志的路径。
    error_log /var/log/nginx/error.log warn;

    # --- 根目录和默认页面 ---
    # 设置Web服务器的根目录
    root /usr/share/nginx/html;
    # 定义默认的索引文件
    index index.html index.htm;

    # --- Location 块 ---
    # 定义如何处理对根URL ("/") 的请求
    location / {
        # try_files 指令会按顺序查找文件。
        # 如果客户端请求 /example，它会先查找 /usr/share/nginx/html/example 文件，
        # 再查找 /usr/share/nginx/html/example/ 目录，
        # 如果都找不到，则返回一个 404 Not Found 错误。
        try_files $uri $uri/ =404;
    }

    # --- 状态监控页面 (可选，但非常有用) ---
    # 我们可以启用 Nginx 的 stub_status 模块，来提供一个简单的状态页面。
    # 这可以让我们实时看到当前的活动连接数等信息。
    location /nginx_status {
        # 启用 stub_status
        stub_status;
        # 只允许来自我们虚拟网络内部的访问（可选，增加安全性）
        allow 172.20.0.0/24;
        # 拒绝所有其他访问
        deny all;
    }
}

